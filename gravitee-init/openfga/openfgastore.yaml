name: Hotel Booking Authorization Model
model: |+
  model
    schema 1.1

  type user

  type hotel
    relations
      define admin: [user, hotel#admin]
      define guest: [user, hotel#guest]

  type room
    relations
      define can_book: [user] or guest from hotel or admin from hotel
      define hotel: [hotel]

  type booking
    relations
      define can_cancel: owner or admin from hotel
      define can_view: owner or admin from hotel
      define hotel: [hotel]
      define owner: [user, hotel#guest]
      define room: [room]

tuples:
  - user: hotel:grand-plaza
    relation: hotel
    object: booking:booking-001
  - user: hotel:grand-plaza
    relation: hotel
    object: room:grand-plaza-101
  - user: user:john.doe@gravitee.io
    relation: guest
    object: hotel:grand-plaza
  - user: room:grand-plaza-101
    relation: room
    object: booking:booking-001
  - user: user:john.doe@gravitee.io
    relation: owner
    object: booking:booking-001
